# Favorites Data Flow

## Independent Storage

- `favorite_prompts` 는 프롬프트 레코드와 동일한 스키마를 가지는 **독립 테이블**입니다.
- 즐겨찾기 레코드는 생성 시점의 내용을 그대로 복제하며, `prompts.id` 를 비롯한 어떤 외래키도 저장하지 않습니다.
- 즐겨찾기를 수정하거나 삭제해도 메인 프롬프트는 영향을 받지 않습니다.

## Actions

### 즐겨찾기 추가

- UI/서버는 필요한 필드만 채워 `favorite_prompts` 에 직접 삽입합니다.
- 추가적인 스냅샷 JSON, 연동 상태 컬럼, RPC 호출이 존재하지 않습니다.

### 삭제

- 즐겨찾기를 삭제하면 `trash` 테이블로 이동하며 `origin_type = 'FAVORITE'` 로 표시합니다.
- 원본 프롬프트와의 관계가 없으므로 휴지통에는 즐겨찾기 데이터만 저장합니다.

### 휴지통 복원

- `origin_type = 'FAVORITE'` 인 항목은 다시 `favorite_prompts` 로 삽입하여 복원합니다.
- UUID 가 새로 생성되며, 다른 테이블을 갱신하거나 트리거를 실행할 필요가 없습니다.

## UI Expectations

- 즐겨찾기 화면은 독립 카드 리스트를 보여주며, “원본 연결/복원” 상태 배지가 존재하지 않습니다.
- 제공되는 액션은 삭제(휴지통 이동)뿐이며, 메인 프롬프트 복사/동기화 기능은 포함하지 않습니다.
- 휴지통 화면에서 즐겨찾기를 복원해도 `favorite_prompts` 외에는 영향이 없습니다.

즐겨찾기는 “스냅샷이지만 완전히 독립적인 리소스” 라는 점을 항상 기억하세요. 프롬프트 기능과 결합되는 뷰, 트리거, RPC 는 더 이상 존재하지 않습니다.




